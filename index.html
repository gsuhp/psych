<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clock In / Clock Out PDF Generator</title>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<style>
  html, body { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; }
  body { display:flex; flex-direction:column; justify-content:center; align-items:center; background:#f0f2f5; }
  button { padding:20px 40px; margin:10px; font-size:20px; cursor:pointer; border:none; border-radius:10px; background:#1f2937; color:white; }
  #fullScreenModal { display:none; position:fixed; inset:0; background:#fefefe; flex-direction:column; justify-content:center; align-items:center; z-index:9999; }
  #fullScreenModal input { font-size:24px; padding:12px; margin:12px 0; width:300px; border-radius:8px; border:1px solid #ccc; text-align:center; }
  #fullScreenModal button { font-size:22px; padding:12px 24px; }
  h1 { margin-bottom:20px; }
</style>
</head>
<body>

<h1>Clock In / Clock Out</h1>
<button id="clockInBtn">Clock In</button>
<button id="clockOutBtn">Clock Out</button>

<div id="fullScreenModal">
  <h1 id="modalTitle">Clock In</h1>
  <input type="number" id="badgeNumber" placeholder="Enter Badge Number" min="1">
  <div>
    <button id="confirmBtn">Confirm</button>
    <button id="cancelBtn">Cancel</button>
  </div>
</div>

<script>
const { jsPDF } = window.jspdf;

let actionType = ''; // 'IN' or 'OUT'
const modal = document.getElementById('fullScreenModal');
const modalTitle = document.getElementById('modalTitle');
const badgeInput = document.getElementById('badgeNumber');
const confirmBtn = document.getElementById('confirmBtn');
const cancelBtn = document.getElementById('cancelBtn');

document.getElementById('clockInBtn').addEventListener('click', ()=>openModal('IN'));
document.getElementById('clockOutBtn').addEventListener('click', ()=>openModal('OUT'));

function openModal(type){
  actionType = type;
  modal.style.display = 'flex';
  modalTitle.textContent = type === 'IN' ? 'Clock In' : 'Clock Out';
  badgeInput.value = '';
  setTimeout(()=>badgeInput.focus(),50);
}

function closeModal(){ modal.style.display = 'none'; }

function confirmClock(){
  const badge = badgeInput.value.trim();
  if(!badge){ alert('Please enter your badge number'); badgeInput.focus(); return; }
  generatePDF(badge, actionType);
  closeModal();
}

confirmBtn.addEventListener('click', confirmClock);
cancelBtn.addEventListener('click', closeModal);

// allow Enter key to confirm
badgeInput.addEventListener('keydown', e=>{
  if(e.key === 'Enter') confirmClock();
});

function generatePDF(badge, type){
  const now = new Date();
  const timestamp = now.toLocaleString();
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text(`Clock ${type}`, 105, 30, null, null, 'center');
  doc.setFontSize(14);
  doc.text(`Badge Number: ${badge}`, 20, 60);
  doc.text(`Date & Time: ${timestamp}`, 20, 80);
  doc.text(`Type: Clock ${type}`, 20, 100);
  const safeBadge = badge.replace(/[^a-z0-9]/gi,'_');
  doc.save(`Clock_${type}_${safeBadge}_${now.getTime()}.pdf`);
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Psych â€” Clinical Tools (Protected)</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Comfortaa for page display -->
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{--bg:#f7f8fb;--card:#fff;--muted:#6b7280;--accent:#1f2937}
  html,body{height:100%;margin:0;font-family:"Comfortaa",Arial,sans-serif;background:var(--bg);color:#111}
  .wrap{max-width:980px;margin:18px auto;padding:18px;}
  .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .brand{font-size:20px;font-weight:700;color:var(--accent)}
  .nav{display:flex;gap:8px}
  .nav button{background:transparent;border:1px solid transparent;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
  .nav button.active{background:var(--accent);color:#fff}
  .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 20px rgba(15,23,42,0.06);border:1px solid #e6eef8}
  label{display:block;margin-top:12px;font-weight:700}
  input[type="text"], input[type="number"], input[type="date"], select, textarea {
    width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #d1d5db; box-sizing:border-box; font-weight:700;
  }
  textarea{min-height:80px; resize:vertical}
  .row{display:flex;gap:12px}
  .col-1{flex:0 0 120px}
  .col-flex{flex:1}
  .small{font-size:12px;color:var(--muted);margin-left:6px;font-weight:400}
  .controls{display:flex;gap:8px;margin-top:12px}
  button.primary{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700}
  button.ghost{background:transparent;border:1px solid #d1d5db;padding:10px 14px;border-radius:8px;cursor:pointer}
  .logout{background:#b33;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  pre#output{background:#fafafa;padding:12px;border-radius:8px;border:1px solid #eee;margin-top:14px;white-space:pre-wrap}
  .login-wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);z-index:999}
  .login-card{width:360px;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 12px 40px rgba(2,6,23,0.2)}
  .login-card h2{text-align:center;margin:0 0 12px;font-size:20px}
  .meta{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}
  @media (max-width:760px){ .row{flex-direction:column} .col-1{flex:auto} }
  a.linkish{color:var(--accent);text-decoration:underline;cursor:pointer;font-weight:700}
</style>
</head>
<body>
  <script>
    // Disclaimer before login
    alert("DISCLAIMER: This is NOT a real psychiatric center. No real patient information (PHI) is collected. This tool is for roleplay or educational purposes only.");
  </script>

  <!-- Login overlay -->
  <div id="login" class="login-wrap" aria-hidden="false">
    <div class="login-card" role="dialog" aria-label="Site login">
      <h2>Protected Access</h2>

      <label for="loginUser">Username</label>
      <input id="loginUser" type="text" autocomplete="username" placeholder="Enter username">

      <label for="loginPass" style="margin-top:10px">Password</label>
      <input id="loginPass" type="password" autocomplete="current-password" placeholder="Enter password">

      <div style="display:flex;gap:8px;margin-top:12px;">
        <button id="loginBtn" class="primary" style="flex:1">Sign in</button>
      </div>

      <div style="display:flex;justify-content:space-between;margin-top:10px;align-items:center">
        <div class="meta">Client-side authentication only.</div>
        <a id="forgotLink" class="linkish" aria-label="Forgot password">Forgot?</a>
      </div>
    </div>
  </div>

  <!-- Main App -->
  <div id="app" class="wrap" style="display:none">
    <!-- ... rest of your original code remains untouched ... -->
